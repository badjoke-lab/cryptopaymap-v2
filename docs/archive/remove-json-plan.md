# JSON 完全廃止のための削除 PR 計画メモ（実行はしない）

目的: “消すならこれ” を文章化し、いつでも撤去できる状態にする（保険）。

> **重要**: このドキュメントは計画メモであり、ここに書かれた削除作業は**実行しない**。

## 影響範囲（削除対象）

- `data/places.json`
- `/api/places` の JSON fallback 分岐
- JSON 参照に関するドキュメント（今回の削除 PR で整理）

## 代替（DB 安定運用の前提条件）

JSON を完全廃止する前提として、DB を安定運用できることが必要。

- **再試行**: 一時的な DB 障害時のリトライ（指数バックオフ等）
- **キャッシュ**: 読み取り負荷の吸収と一時停止時の影響緩和
- **監視**: DB の可用性・遅延・エラー率の監視
- **アラート**: 閾値超過時の即時通知
- **運用手順**: 障害時の切り分け・復旧手順の整備

## 手順（削除する場合）

1. `data/places.json` を削除する。
2. `/api/places` の JSON fallback 分岐を削除する。
3. JSON 参照に関するドキュメントを削除または更新する。
4. 既存の動作確認項目に加えて「検証観点」を満たすかを確認する。

## ロールバック手順（問題が出たら戻す）

1. 削除した `data/places.json` を復元する。
2. `/api/places` の JSON fallback 分岐を復活させる。
3. JSON 参照のドキュメントを元に戻す。
4. 復元後の動作確認を行う。

## 検証観点

- DB 停止時の挙動（JSON fallback が無い状態のエラーハンドリング）
- `/stats` と `/submit` への影響がないこと
- `/api/places` の応答が DB のみで正しく動作すること
- リトライ・キャッシュが期待どおり機能すること

## 注意事項

- 本メモは **計画のみ** であり、削除作業は **実行しない**。
- 実行する場合は、必ず関係者合意と運用準備の完了後に行うこと。
